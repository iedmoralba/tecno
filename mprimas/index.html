<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3">

	<link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister" rel="stylesheet">
	<!--Jquery-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<!--Prefix-->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
	<!--Animate-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
	<!--Style-->
	<style type="text/css">
		*{margin:0; padding:0; box-sizing:border-box;}
		#lienzo{border:0px solid black; width: 731px; height: 411px;}
		#portada,#actividad,#fin{
			border:1px solid black;
			width: 731px; height: 411px;
			position: relative;
			background-color: #e8a31c;
			background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='28' height='49' viewBox='0 0 28 49'%3E%3Cg fill-rule='evenodd'%3E%3Cg id='hexagons' fill='%23eac56c' fill-opacity='0.36' fill-rule='nonzero'%3E%3Cpath d='M13.99 9.25l13 7.5v15l-13 7.5L1 31.75v-15l12.99-7.5zM3 17.9v12.7l10.99 6.34 11-6.35V17.9l-11-6.34L3 17.9zM0 15l12.98-7.5V0h-2v6.35L0 12.69v2.3zm0 18.5L12.98 41v8h-2v-6.85L0 35.81v-2.3zM15 0v7.5L27.99 15H28v-2.31h-.01L17 6.35V0h-2zm0 49v-8l12.99-7.5H28v2.31h-.01L17 42.15V49h-2z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
			user-select: none;
			display: none;
		}
		#autor {
		    margin-top: 120px;
		    font-family: Pacifico;
		    font-size: 50px;
		    width: 731px;
		    text-align: center;
		    user-select: none;
		}
		#eslogan {
		    font-family: 'Love Ya Like A Sister', cursive;
		    color: white;
		    font-size: 20px;
		    width: 731px;
		    text-align: center;
		    user-select: none;
		}
		#btn_inicio {
			user-select: none;
		    width: 50px;
		    height: 50px;
		    background: url(img/botonp.png);
		    background-size: 100% 100%;
		    margin: 0 auto;
		    margin-top: 20px;
		    cursor: pointer;
		}
		/**/
		.titg{
			font-family: 'Pacifico', cursive;
			position: absolute;
			top: 5px;
			left: 15px;
			font-size: 22px;
			color:white;
			z-index: 2
		}
		.linea{
			width: 701px;
			left: 15px;
			height: 3px;
			background:black;
			position: absolute;
			top:42px;
		}
		.menu{
			width: 35px;
			height: 35px;
			background-image: url('img/menu.png');
			background-size: 100% 100%;
			position: absolute;
			right: 15px;
			top: 5px;
			cursor:pointer;
		}
		.tr{position: absolute;top: 60px; left:30px; font-weight: bold; text-shadow: 1px 1px  2px gray;}
		.td{position: absolute;top: 80px; left:30px;}
		.franja{width: 731px; height: 150px; position: absolute; top:150px; display: flex; justify-content: space-evenly;}
		.cimg{border:2px solid black; width: 150px; height: 150px; cursor: pointer; position: relative;}
		#btns{position: absolute;top:350px;left:325.5px;padding:5px; width:90px; font-weight: bold; background: green; text-align: center; color:white; text-shadow: 0px 0px 2px black; cursor: pointer; border-radius: 5px; border:1px solid black;}
		.num{position: absolute; width: 25px; height: 25px; border:2px solid black; background: white; right:-13px; top:-13px; text-align: center; border-radius: 50%; font-weight: bold; padding-top: 2px; font-family: 'Love Ya Like A Sister', cursive; display: none;}
		#vidrio{position: absolute; top:0; left: 0; width: 731px; height: 411px; background:black; opacity: 0.5; display: none;}
		#mensaje{border:3px solid black; width: 431px; height: 211px; position: absolute; left: 150px; top:100px; background:white; padding: 20px; display: none;}
		#btnok{position: absolute;bottom: 10px;right:10px;padding:5px; width:90px; font-weight: bold; background: green; text-align: center; color:white; text-shadow: 0px 0px 2px black; cursor: pointer; border-radius: 5px; border:1px solid black;}
		/**/
		#imgf{width: 200px; position: absolute; left:250px; top: 80px;}
		#txtf{position: absolute; left:150px; top:320px;color: white; font-weight: bold; font-size: 25px; font-family: 'Love Ya Like A Sister', cursive; text-shadow: 0px 0px 5px black;}
	</style>
</head>
<body>
	<div id="lienzo">
		<div id="portada">
			<p id="autor">QuieroConTIC</p>
			<p id="eslogan">"Materias primas y productos procesados"</p>
			<div id="btn_inicio"></div>
		</div>
		<div id="actividad">
			<div class="titg">QuieroConTic</div>
			<div class="linea"></div>
			<div class="menu" ></div>
			<div class="tr">ACTIVIDAD:</div>
			<p class="td">
				Presiona las siguientes imagenes en el orden correcto iniciando desde la materia prima y terminando en el producto.
			</p>
			<div class="franja">
				<div class="cimg" id="c1"><div class="num"></div></div>
				<div class="cimg" id="c2"><div class="num"></div></div>
				<div class="cimg" id="c3"><div class="num"></div></div>
			</div>
			<div id="btns">Evaluar</div>
			<div id="vidrio"></div>
			<div id="mensaje">
				<div class="titg" style="color:black">QuieroConTic</div>
				<div class="linea" style="width: 90%;"></div>
				<p class="td" id="txtmsj"></p>
				<div id="btnok">Entendido</div>
			</div>
		</div>
		<div id="fin">
			<div class="titg">QuieroConTic</div>
			<div class="linea"></div>
			<div class="menu" ></div>
			<img src="img/bien.png" id="imgf">
			<div id="txtf">Â¡Actividad terminada felicitaciones!</div>
		</div>
	</div>

	<script type="text/javascript">
		var indice=0;
		var numero=0;
		var campos=$(".cimg");
		var lineas=['0-1-2','3-4-5','6-7-8','9-10-11','12-13-14','15-16-17','18-19-20','21-22-23','24-25-26'];
		var array_activo=[];
		var array_din=[];

		$(function(){
			activarInicio();
			var array=crearLinea();
			var array_des=desordenarArray(array);
			mostrarImagenes(array_des);
			activarCampos();
			activarEvaluar();
			activarBtnMsj();
			$("#portada").css("display","block");
		});

		function activarInicio(){
			$("#btn_inicio").click(function(){
				$("#portada").css("display","none");
        		$("#actividad").css("display","block");
			});
		}

		function activarBtnMsj(){
			$("#btnok").click(function(){
				$("#mensaje").css("display","none");
				$("#vidrio").css("display","none");
			});
		}

		function main(){
			$(".num").css("display","none");
			$(".num").html("");
			var array=crearLinea();
			var array_des=desordenarArray(array);
			mostrarImagenes(array_des);		
		}

		function crearLinea(){
			var a=lineas[indice];
			a=a.split("-");
			for(var i=0;i<a.length;i++){
				array_activo.push(a[i]);
			}
			return(a);
		}

		function desordenarArray(array){
        	//creamos una copia del array
        	var array_clon=[];
        	for(var i=0;i<array.length;i++){
         	array_clon[i]=array[i];
        	}
        	//console.log(array_clon);
         
         	var a=array.sort(function(){return Math.random()-0.5});
         	//console.log(a);
         
         	var igual=true;
         
         	for(var i=0;i<array.length;i++){
         		//console.log(array_clon[i],a[i]);
         		if(array_clon[i]!==a[i]){
         	      //console.log("diferentes");
         	      console.log(a); 
         	      return(a);
         	      break;
         		}else{
         	      //console.log("iguales");
         	      a=array.sort(function(){return Math.random()-0.5});
         	      //console.log(a);
         	      i=0;
         		}
         	}	
        }

        function mostrarImagenes(array){
        	for(var i=0;i<array.length;i++){
        		$(campos[i]).css("background","url('img/"+array[i]+".png')");
				$(campos[i]).css("background-size","100% 100%");
				$(campos[i]).attr("img",array[i]);
        	}
        }

        function activarCampos(){
        	$(campos).click(function(){
        		var obj=$(this)[0];
        		var num=obj.querySelectorAll(".num")[0];
        		var v=$(num).css("display");
        		if(v==="none"){
        			numero++;
        			if(numero!==4){
        				$(num).html(numero);
	        			$(num).css("display","block");
        			}else{
        				numero=0;
        				$(".num").css("display","none");
        				$(".num").html("");
        			}       		
        		}else{
        			numero--;
        			$(num).html("");
	        		$(num).css("display","none");
	        		reenumerar();
        		}
        	});
        }

        function reenumerar(){
        	var c=$(".num");
        	var n=0;
        	for(var i=0;i<c.length;i++){
        		var v=$(c[i]).css("display");
        		if(v==="block"){
        			n++;
        			$(c[i]).html(n);
        		}
        	}
        }

        function activarEvaluar(){
        	$("#btns").click(function(){
        		var aciertos=0;
        		var errores=0;
        		var array_res=[];
        		if(numero===3){
        			for(var i=0;i<campos.length;i++){
        				var obj=$(campos[i])[0];
        				var num=obj.querySelectorAll(".num")[0];
        				num=Number($(num).html())-1;
        				var numa=$(campos[i]).attr("img");
        				array_res[num]=numa;
        			}
        			for(var i=0;i<array_res.length;i++){
        				if(array_res[i]===array_activo[i]){
        					aciertos++;
        				}else{
        					errores++;
        				}
        			}
        			if(aciertos===3 && errores===0){
        				console.log("listo");
        				indice++;
        				if(lineas[indice]){
        					numero=0;
	        				array_activo=[];
							array_din=[];
							setTimeout(function(){main();},1500);
        				}else{
        					$("#actividad").css("display","none");
        					$("#fin").css("display","block");
        				}
        			}else{
        				console.log("hay errores");
        				$("#txtmsj").html("No es el orden correcto, intentalo de nuevo.");
        				$("#vidrio").css("display","block");
        				$("#mensaje").css("display","block");
        			}
        		}else{
        			console.log("falta seleccionar");
        		}
        	});
        }
	</script>
</body>
</html>
